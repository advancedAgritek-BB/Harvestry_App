{
  "Environment": "Staging",
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information",
      "System": "Warning"
    }
  },
  "ConnectionStrings": {
    "PostgreSQL": "Host=${DB_HOST};Port=5432;Database=${DB_NAME};Username=${DB_USER};Password=${DB_PASSWORD};SSL Mode=Require;Trust Server Certificate=false;Include Error Detail=false",
    "Redis": "${REDIS_HOST}:6379,password=${REDIS_PASSWORD},ssl=true,abortConnect=false"
  },
  "Observability": {
    "ServiceName": "harvestry-api",
    "Environment": "staging",
    "OpenTelemetry": {
      "Endpoint": "${OTEL_EXPORTER_OTLP_ENDPOINT}",
      "Protocol": "grpc"
    },
    "Sentry": {
      "Dsn": "${SENTRY_DSN}",
      "Environment": "staging",
      "TracesSampleRate": 0.5,
      "Debug": false
    }
  },
  "FeatureFlags": {
    "Unleash": {
      "UnleashApi": "${UNLEASH_API_URL}",
      "ApiToken": "${UNLEASH_API_TOKEN}",
      "AppName": "harvestry-api",
      "Environment": "staging",
      "RefreshInterval": 30
    }
  },
  "Security": {
    "RLS": {
      "Enabled": true,
      "EnforceUserContext": true
    },
    "JWT": {
      "Secret": "${JWT_SECRET}",
      "Issuer": "harvestry-staging",
      "Audience": "harvestry-api",
      "ExpirationMinutes": 30
    },
    "EncryptionKeys": {
      "KMSKeyId": "${KMS_KEY_ID}",
      "Region": "${AWS_REGION}"
    },
    "CORS": {
      "AllowedOrigins": [
        "https://staging.harvestry.com"
      ]
    }
  },
  "Integrations": {
    "Slack": {
      "WebhookUrl": "${SLACK_WEBHOOK_URL}",
      "BotToken": "${SLACK_BOT_TOKEN}",
      "SigningSecret": "${SLACK_SIGNING_SECRET}"
    },
    "METRC": {
      "BaseUrl": "https://api-ca.metrc.com",
      "VendorApiKey": "${METRC_VENDOR_API_KEY}",
      "UserApiKey": "${METRC_USER_API_KEY}"
    },
    "QuickBooks": {
      "ClientId": "${QBO_CLIENT_ID}",
      "ClientSecret": "${QBO_CLIENT_SECRET}",
      "Environment": "sandbox"
    }
  },
  "RateLimiting": {
    "Enabled": true,
    "PermitLimit": 1000,
    "Window": "00:01:00",
    "QueueLimit": 100
  },
  "HealthChecks": {
    "Enabled": true,
    "Endpoints": [
      "/health/live",
      "/health/ready"
    ]
  }
}
